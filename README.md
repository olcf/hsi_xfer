# HPSS Batch Migration

```
usage: hpss_batch_migration.py [-h] [--dry-run] [--db-path DB_PATH]
                               [--preserve-file-lists] [--preserve-db]
                               [--disable-checksums]
                               [--additional-hsi-flags ADDITIONAL_HSI_FLAGS]
                               [--overwrite-existing] [--verbose]
                               source destination

positional arguments:
  source                Top level directory in HPSS to pull files from. This
                        is a recursive action!
  destination           Top level directory on Kronos to put files. An
                        identical directory structure will be created here as
                        exists in HPSS under `source`

optional arguments:
  -h, --help            show this help message and exit
  --dry-run             Generate the file lists but do not actually checksum
                        or transfer files, and output the `hsi` commands that
                        would have been used
  --db-path DB_PATH     Path to existing db generated by --preserve-db, or
                        from an interrupted job. Picks up where the last job
                        left off
  --preserve-file-lists
                        Do not delete the file list generated by this script.
                        Will write the list to the cwd
  --preserve-db         Do not delete the db cache. This can be useful for
                        restarting an interrupted migration
  --disable-checksums   Disable the checksumming operation. This can speed
                        things up, but at the cost of not verifying data
                        integrity on the destination
  --additional-hsi-flags ADDITIONAL_HSI_FLAGS
                        Additional flags needed to be passed to `hsi`
  --overwrite-existing  Force overwrite of existing files that match the file
                        names in HPSS
  --verbose             Output additional information about the transfer
```

Additional hidden flags:

```
--vvs-per-job=1 Batches up multiple VVs into a single HSI job. 
--checksum-threads=4 Launches more threads in the destination checksumming worker pool
--disable-ta Launches the HSI get with -T off
```
