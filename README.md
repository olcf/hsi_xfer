# hsi_xfer

```
usage: hsi_xfer [-h] [-D] [-C CACHE_PATH] [-l] [-P] [-p] [-c] [-a ADDITIONAL_HSI_FLAGS] [-e] [-f PRESERVED_FILES_PATH] [-E] [-i UPDATE_INTERVAL] [-S] [--checksum-threads CHECKSUM_THREADS] [--debug] [-T] [-s DB_TX_SIZE] [-r] [-V VVS_PER_JOB] [-L LIST_INPUT_OVERRIDE] [-m]
                [-t PARALLEL_MIGRATION_COUNT] [-v]
                source destination

NOTE: While this script will work with PASSCODE auth, it is HIGHLY recommended to use standard 'keytab' auth (e.g. do not use --additional-hsi-flags unless you absolutely must!)

positional arguments:
  source                Top level directory in HPSS to pull files from. This is a recursive action!
  destination           Top level directory on Kronos to put files. An identical directory structure will be created here as exists in HPSS under `source`

options:
  -h, --help            show this help message and exit
  -D, --dry-run         Generate the file lists but do not actually checksum or transfer files, and output the `hsi` commands that would have been used
  -C CACHE_PATH, --cache-path CACHE_PATH
                        Path to existing cache generated by --preserve-cache, or from an interrupted job. Picks up where the last job left off
  -l, --preserve-file-lists
                        Do not delete the file list generated by this script. Will write the list to the cwd or the value of --preserved-files-path
  -P, --preserve-timestamps
                        Overwrites timestamps on transferred files to match timestamps of file within HPSS
  -p, --preserve-cache  Do not delete the cache. This can be useful for restarting an interrupted migration
  -c, --disable-checksums
                        Disable the checksumming operation. This can speed things up, but at the cost of not verifying data integrity on the destination
  -a ADDITIONAL_HSI_FLAGS, --additional-hsi-flags ADDITIONAL_HSI_FLAGS
                        Additional flags needed to be passed to `hsi`
  -e, --overwrite-existing
                        Force overwrite of existing files that match the file names in HPSS
  -f PRESERVED_FILES_PATH, --preserved-files-path PRESERVED_FILES_PATH
                        Sets the path that the transfer report and/or database/file list are written to. This can be useful if the DB and resulting files lists/transfer report are too large for your current working directory
  -E, --enable-log-timestamps
                        Turn on log timestamps for status output
  -i UPDATE_INTERVAL, --update-interval UPDATE_INTERVAL
                        Sets the interval between status updates during file transfers
  -S, --skip-filelist-build
                        When --dry-run is set, skip building of the filelists
  --checksum-threads CHECKSUM_THREADS
                        Number of threads to use for destination checksumming
  --debug               Enable debug output
  -T, --disable-ta      Disables the HPSS transfer agent
  -s DB_TX_SIZE, --db-tx-size DB_TX_SIZE
                        Sets the maximum number of rows for any individual database transaction
  -r, --trace           Enable trace output
  -V VVS_PER_JOB, --vvs-per-job VVS_PER_JOB
                        Sets the number of HPSS VVs that each HSI thread processes at any one time
  -L LIST_INPUT_OVERRIDE, --list-input-override LIST_INPUT_OVERRIDE
                        Processes an exisitng directory of HSI in-files. NOTE: This disables all caching, checksumming, and checkpointing features!
  -m, --move-filelists  When -L is used, this flag is used to determine whether to move processed in-file lists to either *.error or *.done
  -t PARALLEL_MIGRATION_COUNT, --parallel-migration-count PARALLEL_MIGRATION_COUNT
                        Sets the number of parallel HSI threads in the pool to dispatch filelists to
  -v, --verbose         Output additional information about the transfer

```
Motivation:

Overview:

To build:
```
```
To run:
```
```
